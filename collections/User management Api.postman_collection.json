{
	"info": {
		"_postman_id": "84c0001e-b32a-4f45-b78a-e3cb5a0aca50",
		"name": "User management Api",
		"description": "EXECUTION_MODE:\n\n- full\n    \n- positive-only\n    \n- negative-only\n    \n- health-check\n    \n\nDEFAULT_ORDER:  \n00_Health_Check  \n01_Positive  \n02_Negative  \n03_Contract  \n  \nRUN_CLASSIFICATION_RULES:\n\n- Health Check failure → BLOCKER\n    \n- Contract failure → RELEASE_BLOCK\n    \n- Positive failure → REGRESSION\n    \n- Negative failure → DEFECT",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "39454299"
	},
	"item": [
		{
			"name": "00_Collection_Setup",
			"item": [
				{
					"name": "HealthCheck",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/health",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"health"
							]
						},
						"description": "TEST_TYPE: HEALTH  \nSTATE_REQUIRED: NONE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nSEVERITY: BLOCKER\n\nDESCRIPTION:  \nPurpose:  \nVerify that the API service is running and reachable.\n\nScope:  \nBasic availability check only (no business logic validation).\n\nExpected Behavior:  \nGET /health responds with HTTP 200.\n\nFailure Impact:  \nIndicates environment instability or service downtime.  \nAll downstream tests must be blocked if this fails.\n\nNotes:  \nThis request is executed before any lifecycle, negative, or flow tests."
					},
					"response": []
				}
			],
			"description": "# EXECUTION_PROFILE:\n\nTEST_LEVEL: SMOKE  \nENV_ALLOWED: QA | UAT | STAGE  \nBUILD_MIN: \\*  \nBUILD_MAX: \\*  \nDEPLOYMENT_REQUIRED: COMPLETE  \nEXECUTION_ORDER: SEQUENTIAL  \nFAILURE_POLICY: STOP\n\n**Purpose**:  \nInitializes and validates the test environment before any functional tests run.\n\n**Scope**:\n\n- Environment readiness\n    \n- Base URL availability\n    \n- Required headers, tokens, and variables\n    \n- Common preconditions for the entire collection\n    \n\n**Execution Behavior:  \n**Must be executed first.  \nFailures indicate environment or configuration issues."
		},
		{
			"name": "01_User_Lifecycle",
			"item": [
				{
					"name": "Create User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", () => {",
									"    pm.response.to.have.status(201);",
									"});",
									"pm.test(\"User is created successfully\", () => {",
									"    pm.expect(pm.response.json().id).to.exist;",
									"});",
									"pm.environment.set(\"userId\", pm.response.json().id)"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"role\": \"USER\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: NONE  \nSTATE_ACTION: CREATE  \nEXPECTED_STATUS: 201  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Create a new user with valid input data.  \nScope: Lifecycle creation step for the user.  \nPre-condition: No user exists with the same unique identifier.  \nExpected Behavior: POST /users succeeds with HTTP 201 and returns user ID.  \nPost-condition: User is ACTIVE and ready for further lifecycle operations.  \nNotes: This request is the starting point for all subsequent lifecycle tests."
					},
					"response": []
				},
				{
					"name": "Get User",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.test(\"User ID exists\", () => {",
									"    pm.expect(pm.environment.get(\"userId\")).to.exist;",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"Correct user returned\", () => {",
									"    pm.expect(pm.response.json().id).to.eql(pm.environment.get(\"userId\"));",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: ACTIVE | SUSPENDED  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Retrieve an existing user’s details.  \nScope: Lifecycle read operation to validate current user state.  \nPre-condition: User must exist in the system.  \nExpected Behavior: GET /users/{{userId}} succeeds with HTTP 200 and returns correct user data including current state.  \nPost-condition: Confirms user data consistency for subsequent lifecycle operations.  \nNotes: Serves as a verification step for both positive and negative scenarios."
					},
					"response": []
				},
				{
					"name": "Activate User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => pm.response.to.have.status(200));",
									"pm.test(\"User status is ACTIVE\", () => {",
									"    pm.expect(pm.response.json().status).to.eql(\"ACTIVE\");",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/activate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"activate"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: SUSPENDED  \nSTATE_ACTION: ACTIVATE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Activate a SUSPENDED user.  \nScope: Lifecycle state transition step (SUSPENDED → ACTIVE).  \nPre-condition: User must be SUSPENDED.  \nExpected Behavior: POST /users/{{userId}}/activate succeeds with HTTP 200.  \nPost-condition: User state is ACTIVE, ready for further operations.  \nNotes: Validates proper lifecycle enforcement."
					},
					"response": []
				},
				{
					"name": "Update user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.test(\"User updated successfully\", () => {",
									"    pm.expect(pm.response.json().status).to.eql(\"ACTIVE\");",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"Jane\",\n  \"role\": \"MANAGER\"\n}\n\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: ACTIVE | SUSPENDED  \nSTATE_ACTION: UPDATE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Update user information such as name, role, or email.  \nScope: Lifecycle update operation to validate system correctly handles modifications.  \nPre-condition: User must exist in the system.  \nExpected Behavior: PUT /users/{{userId}} succeeds with HTTP 200 and updates the user data.  \nPost-condition: Updated user details are reflected in subsequent GET requests.  \nNotes: Ensures system maintains correct data integrity after updates."
					},
					"response": []
				},
				{
					"name": "Suspend User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", () => pm.response.to.have.status(200));",
									"pm.test(\"User status is SUSPENDED\", () => {",
									"    pm.expect(pm.response.json().status).to.eql(\"SUSPENDED\");",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/suspend",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"suspend"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: SUSPEND  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Suspend an ACTIVE user.  \nScope: Lifecycle state transition step (ACTIVE → SUSPENDED).  \nPre-condition: User must be ACTIVE (handled via pre-request script)  \nExpected Behavior: POST /users/{{userId}}/suspend succeeds with HTTP 200.  \nPost-condition: User state is SUSPENDED, ready for activation.  \nNotes: Ensures proper enforcement of lifecycle rules."
					},
					"response": []
				},
				{
					"name": "Delete user",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE  \nSTATE_REQUIRED: ACTIVE | SUSPENDED  \nSTATE_ACTION: DELETE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Delete an existing user regardless of current state.  \nScope: Lifecycle termination step.  \nPre-condition: User must exist in the system.  \nExpected Behavior: DELETE /users/{{userId}} succeeds with HTTP 200.  \nPost-condition: User no longer exists in the system.  \nNotes: Ensures system handles cleanup and final lifecycle step."
					},
					"response": []
				}
			],
			"description": "**EXECUTION_PROFILE:**  \nTEST_LEVEL: REGRESSION  \nENV_ALLOWED: QA | UAT  \nINTRODUCED_IN_BUILD: \\*  \nDEPLOYMENT_REQUIRED: COMPLETE  \nEXECUTION_ORDER: SEQUENTIAL  \nFAILURE_POLICY: STOP\n\n**Purpose**: Validates the complete lifecycle of a user including creation, suspension, activation, and deletion.  \n**Scope**: Ensures all lifecycle operations succeed or fail as expected and system state is consistent across operations.  \n**Notes**: Requests may have dependencies; pre-request scripts ensure users are in the correct initial state."
		},
		{
			"name": "02_Negative_Scenarios",
			"item": [
				{
					"name": "[Request override]Get User – Invalid ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/invalid-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"invalid-id"
							]
						},
						"description": "# Execution Metadata\n\nINTRODUCED_IN_BUILD: 4.7.2\n\n# Logging / Classification\n\nCLASSIFICATION: DEFECT  \nACTION_ON_FAILURE: LOG_DEFECT\n\n# Request-Specific Metadata\n\nRUN_TYPE_OVERRIDE: REGRESSION\n\n# Test Details\n\nTEST_TYPE: LIFECYCLE_NEGATIVE  \nSTATE_REQUIRED: NONE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 404  \nERROR_CODE: USER_NOT_FOUND  \nSEVERITY: HIGH\n\n# Description\n\nPurpose: Attempt to retrieve a user using an invalid or non-existent user ID.  \nScope: Negative lifecycle test for GET operation.  \nPre-condition: User ID does not exist in the system.  \nExpected Behavior: GET /users/{{invalidUserId}} fails with HTTP 404 and error code USER_NOT_FOUND.  \nPost-condition: No user data is returned; system state remains unchanged.  \nNotes: Validates that the system correctly handles invalid read requests."
					},
					"response": []
				},
				{
					"name": "Activate User – Already Active",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Cannot Activate already Active user\", () => {",
									"  pm.response.to.have.status(400);",
									"});",
									"pm.test(\"ERROR_CODE_MATCH\", () => {",
									"  pm.expect(pm.response.json().errorCode)",
									"    .to.eql(\"USER_ALREADY_ACTIVE\");",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Ensure user exists",
									"if (!pm.environment.get(\"userId\")) {",
									"    pm.sendRequest({",
									"        url: `${pm.environment.get(\"baseUrl\")}/users`,",
									"        method: \"POST\",",
									"        header: { \"Content-Type\": \"application/json\" },",
									"        body: {",
									"            mode: \"raw\",",
									"            raw: JSON.stringify({",
									"                firstName: \"Neg\",",
									"                lastName: \"Case\",",
									"                email: `neg_${Date.now()}@test.com`,",
									"                role: \"USER\"",
									"            })",
									"        }",
									"    }, function (err, res) {",
									"        pm.environment.set(\"userId\", res.json().id);",
									"        pm.environment.set(\"userStatus\", \"ACTIVE\");",
									"    });",
									"}",
									"",
									"// Ensure user is active",
									"if (pm.environment.get(\"userStatus\") !== \"ACTIVE\") {",
									"    pm.sendRequest({",
									"        url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/suspend`,",
									"        method: \"POST\"",
									"    }, function () {",
									"        pm.environment.set(\"userStatus\", \"ACTIVE\");",
									"    });",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/activate",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"activate"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE_NEGATIVE  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: ACTIVATE  \nEXPECTED_STATUS: 400  \nERROR_CODE: USER_ALREADY_ACTIVE  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Attempt to activate a user who is already ACTIVE.  \nScope: Negative lifecycle test for state transition.  \nPre-condition: User must be ACTIVE.  \nExpected Behavior: POST /users/{{userId}}/activate fails with HTTP 400 and error code USER_ALREADY_ACTIVE.  \nPost-condition: User state remains ACTIVE; no changes are applied.  \nNotes: Ensures system prevents redundant state transitions."
					},
					"response": []
				},
				{
					"name": "Suspend User – Already Suspended",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Cannot suspend already suspended user\", () => {",
									"  pm.response.to.have.status(400);",
									"});",
									"pm.test(\"ERROR_CODE_MATCH\", () => {",
									"  pm.expect(pm.response.json().errorCode)",
									"    .to.eql(\"USER_ALREADY_SUSPENDED\");",
									"});",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Ensure user exists",
									"if (!pm.environment.get(\"userId\")) {",
									"    pm.sendRequest({",
									"        url: `${pm.environment.get(\"baseUrl\")}/users`,",
									"        method: \"POST\",",
									"        header: { \"Content-Type\": \"application/json\" },",
									"        body: {",
									"            mode: \"raw\",",
									"            raw: JSON.stringify({",
									"                firstName: \"Neg\",",
									"                lastName: \"Case\",",
									"                email: `neg_${Date.now()}@test.com`,",
									"                role: \"USER\"",
									"            })",
									"        }",
									"    }, function (err, res) {",
									"        pm.environment.set(\"userId\", res.json().id);",
									"        pm.environment.set(\"userStatus\", \"ACTIVE\");",
									"    });",
									"}",
									"",
									"// Ensure user is suspended",
									"if (pm.environment.get(\"userStatus\") !== \"SUSPENDED\") {",
									"    pm.sendRequest({",
									"        url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/suspend`,",
									"        method: \"POST\"",
									"    }, function () {",
									"        pm.environment.set(\"userStatus\", \"SUSPENDED\");",
									"    });",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}/suspend",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}",
								"suspend"
							]
						},
						"description": "TEST_TYPE: LIFECYCLE_NEGATIVE  \nSTATE_REQUIRED: SUSPENDED  \nSTATE_ACTION: SUSPEND  \nEXPECTED_STATUS: 400  \nERROR_CODE: USER_ALREADY_SUSPENDED  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Attempt to suspend a user who is already SUSPENDED.  \nScope: Negative lifecycle test for state transition.  \nPre-condition: User must be SUSPENDED.  \nExpected Behavior: POST /users/{{userId}}/suspend fails with HTTP 400 and error code USER_ALREADY_SUSPENDED.  \nPost-condition: User state remains SUSPENDED; no changes are applied.  \nNotes: Ensures system prevents redundant state transitions."
					},
					"response": []
				}
			],
			"description": "EXECUTION_PROFILE:  \nTEST_LEVEL: REGRESSION  \nENV_ALLOWED: QA  \nINTRODUCED_IN_BUILD: 4.7.1  \nDEPLOYMENT_REQUIRED: COMPLETE  \nEXECUTION_ORDER: INDEPENDENT  \nFAILURE_POLICY: CONTINUE\n\nPurpose: Validates system behavior when invalid or conflicting lifecycle operations are attempted.  \nScope: Ensures proper error handling for invalid Create, Get, Update, Suspend, Activate, and Delete operations.  \nNotes: Each request is independent. Failures are expected.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"const CLASSIFICATION = \"DEFECT\";",
							"const ACTION_ON_FAILURE = \"LOG_DEFECT\";",
							"",
							"// Read expected status from request description",
							"const description = pm.request.description?.content || \"\";",
							"const match = description.match(/EXPECTED_STATUS:\\s*(\\d+)/);",
							"const expectedStatus = match ? parseInt(match[1]) : null;",
							"",
							"const actualStatus = pm.response.code;",
							"",
							"// Always log summary",
							"console.log({",
							"  request: pm.info.requestName,",
							"  expectedStatus,",
							"  actualStatus",
							"});",
							"",
							"// ENV issue",
							"if (actualStatus >= 500) {",
							"  console.log({",
							"    FAILURE: true,",
							"    CLASSIFICATION: \"ENV_ISSUE\",",
							"    ACTION: \"RETRY_OR_BLOCK\",",
							"    reason: \"5xx in negative test\",",
							"    status: actualStatus",
							"  });",
							"}",
							"// Expected status missing (framework issue)",
							"else if (!expectedStatus) {",
							"  console.log({",
							"    FAILURE: true,",
							"    CLASSIFICATION: \"FRAMEWORK_CONFIG_ERROR\",",
							"    ACTION: \"FIX_METADATA\",",
							"    reason: \"EXPECTED_STATUS not defined\"",
							"  });",
							"}",
							"// Business logic defect",
							"else if (actualStatus !== expectedStatus) {",
							"  console.log({",
							"    FAILURE: true,",
							"    CLASSIFICATION: CLASSIFICATION,",
							"    ACTION: ACTION_ON_FAILURE,",
							"    reason: \"Unexpected status for negative scenario\",",
							"    status: actualStatus",
							"  });",
							"}",
							"// Correct negative",
							"else {",
							"  console.log({",
							"    RESULT: \"EXPECTED_NEGATIVE_BEHAVIOR\",",
							"    status: actualStatus",
							"  });",
							"}",
							""
						]
					}
				}
			]
		},
		{
			"name": "03_Contract",
			"item": [
				{
					"name": "Create User – Contract",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const schema = {",
									"  type: \"object\",",
									"  required: [\"id\", \"firstName\", \"lastName\", \"email\", \"role\", \"status\"],",
									"  properties: {",
									"    id: { type: \"string\" },",
									"    firstName: { type: \"string\" },",
									"    lastName: { type: \"string\" },",
									"    email: { type: \"string\" },",
									"    role: { type: \"string\", enum: [\"USER\", \"ADMIN\", \"MANAGER\"] },",
									"    status: { type: \"string\", enum: [\"ACTIVE\", \"SUSPENDED\"] }",
									"  }",
									"};",
									"",
									"pm.test(\"Response matches user schema\", () => {",
									"    pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"role\": \"USER\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							]
						},
						"description": "TEST_TYPE: CONTRAST  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Retrieve an ACTIVE user using a valid user ID.  \nScope: Valid contrast request to ensure API returns correct user details.  \nPre-condition: User must exist and be ACTIVE.  \nExpected Behavior: GET returns user details with HTTP 200.  \nPost-condition: Response data is correct and consistent with system state.  \nNotes: This request serves as the baseline for contrast testing."
					},
					"response": []
				},
				{
					"name": "Get User – Contract",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const schema = {",
									"  type: \"object\",",
									"  required: [\"id\", \"firstName\", \"lastName\", \"email\", \"role\", \"status\"],",
									"  properties: {",
									"    id: { type: \"string\" },",
									"    firstName: { type: \"string\" },",
									"    lastName: { type: \"string\" },",
									"    email: { type: \"string\" },",
									"    role: { type: \"string\", enum: [\"USER\", \"ADMIN\", \"MANAGER\"] },",
									"    status: { type: \"string\", enum: [\"ACTIVE\", \"SUSPENDED\"] }",
									"  }",
									"};",
									"",
									"pm.test(\"Response matches user schema\", () => {",
									"    pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"Jane\",\n  \"role\": \"MANAGER\"\n}\n\n"
						},
						"url": {
							"raw": "{{baseUrl}}/users/{{userId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{userId}}"
							]
						},
						"description": "TEST_TYPE: CONTRAST  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Retrieve an ACTIVE user using a valid user ID.  \nScope: Valid contrast request to ensure API returns correct user details.  \nPre-condition: User must exist and be ACTIVE.  \nExpected Behavior: GET returns user details with HTTP 200.  \nPost-condition: Response data is correct and consistent with system state.  \nNotes: This request serves as the baseline for contrast testing."
					},
					"response": []
				},
				{
					"name": "Error Response – Contract",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const errorSchema = {",
									"  type: \"object\",",
									"  required: [\"errorCode\", \"message\"],",
									"  properties: {",
									"    errorCode: { type: \"string\" },",
									"    message: { type: \"string\" }",
									"  }",
									"};",
									"",
									"pm.test(\"Error contract is valid\", () => {",
									"  pm.expect(tv4.validate(pm.response.json(), errorSchema)).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/users/invalid-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"invalid-id"
							]
						},
						"description": "TEST_TYPE: CONTRAST  \nSTATE_REQUIRED: NONE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 404  \nERROR_CODE: USER_NOT_FOUND  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Attempt to retrieve a user using an invalid user ID.  \nScope: Contrast request to validate error handling for non-existent users.  \nPre-condition: User ID does not exist.  \nExpected Behavior: GET returns HTTP 404 with proper error code USER_NOT_FOUND.  \nPost-condition: No user data is returned.  \nNotes: Ensures system handles invalid input gracefully and consistently."
					},
					"response": []
				}
			],
			"description": "EXECUTION_PROFILE:  \nTEST_LEVEL: REGRESSION  \nENV_ALLOWED: QA  \nINTRODUCED_IN_BUILD: \\*  \nDEPLOYMENT_REQUIRED: PARTIAL  \nEXECUTION_ORDER: INDEPENDENT  \nFAILURE_POLICY: CONTINUE\n\n- Purpose: Validates system behavior when contrasting or conflicting inputs are provided.  \n    Scope: Ensures the API handles both valid and invalid requests consistently and returns correct error codes when necessary.  \n    Notes: Each request is independent and can be executed in any order. Execution continues even if failures occur.  \n    EXECUTION_RULE: Continue execution even if failures occur",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"let classification;",
							"",
							"if (pm.info.parentId && pm.info.requestName) {",
							"  if (pm.info.requestName.includes(\"Health\")) {",
							"    classification = \"BLOCKER\";",
							"  } else if (pm.info.requestName.includes(\"Contract\")) {",
							"    classification = \"RELEASE_BLOCK\";",
							"  } else if (pm.info.requestName.includes(\"Negative\")) {",
							"    classification = \"DEFECT\";",
							"  } else {",
							"    classification = \"REGRESSION\";",
							"  }",
							"}",
							"",
							"console.log({",
							"  request: pm.info.requestName,",
							"  classification: classification,",
							"  status: pm.response.code",
							"});",
							"",
							"if (pm.response.code !== 200) {",
							"  console.log({",
							"    failure: true,",
							"    classification: \"RELEASE_BLOCK\",",
							"    action: \"STOP_RELEASE\"",
							"  });",
							"}",
							"",
							"",
							""
						]
					}
				}
			]
		},
		{
			"name": "04_State_Transition",
			"item": [
				{
					"name": "STATE | Valid Transitions",
					"item": [
						{
							"name": "STEP 1 | ACTIVE → SUSPENDED | Allowed",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"User suspended successfully\", () => {",
											"  pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest(",
											"  {",
											"    url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/activate`,",
											"    method: \"POST\"",
											"  },",
											"  function (err, res) {",
											"    if (err) {",
											"      console.warn(\"Pre-request failed due to network issue\", err);",
											"      return;",
											"    }",
											"",
											"    // Acceptable responses for state setup",
											"    if (res.code === 200) {",
											"      console.log(\"User activated in pre-request\");",
											"    } else if (res.code === 400) {",
											"      console.log(\"User already active — state already satisfied\");",
											"    } else {",
											"      console.warn(\"Unexpected response during state setup\", res.code);",
											"    }",
											"  }",
											");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/suspend",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"suspend"
									]
								},
								"description": "# Test Details\n\nTEST_TYPE: STATE_TRANSITION  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: SUSPEND  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\n# DESCRIPTION:\n\nPurpose: Ensure ACTIVE users can be suspended.  \nScope: State Transition validation (ACTIVE → SUSPENDED)  \nPre-condition: User must be ACTIVE (handled via pre-request script)  \nExpected Behavior: Request succeeds (HTTP 200) and user state changes to SUSPENDED  \nPost-condition: State change reflected via GET /users/{{userId}}  \nNotes: Used for lifecycle enforcement; can be run independently"
							},
							"response": []
						},
						{
							"name": "STEP 1 | SUSPENDED → ACTIVE | Allowed",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"User activated successfully\", () => {",
											"  pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest(",
											"  {",
											"    url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/suspend`,",
											"    method: \"POST\"",
											"  },",
											"  function (err, res) {",
											"    if (err) {",
											"      console.warn(\"Pre-request failed\", err);",
											"      return;",
											"    }",
											"",
											"    if (res.code === 200) {",
											"      console.log(\"User suspended in pre-request\");",
											"    } else if (res.code === 400) {",
											"      console.log(\"User already suspended — state OK\");",
											"    } else {",
											"      console.warn(\"Unexpected response during suspend setup\", res.code);",
											"    }",
											"  }",
											");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/activate",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"activate"
									]
								},
								"description": "TEST_TYPE: STATE_TRANSITION  \nSTATE_REQUIRED: SUSPEND  \nSTATE_ACTION: ACTIVATE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Ensure ACTIVE users can be suspended.  \nScope: State Transition validation (SUSPEND → ACTIVE)  \nPre-condition: User must be SUSPENDED (handled via pre-request script)  \nExpected Behavior: Request succeeds (HTTP 200) and user state changes to ACTIVE  \nPost-condition: State change reflected via GET /users/{{userId}}  \nNotes: Used for lifecycle enforcement; can be run independently"
							},
							"response": []
						}
					]
				},
				{
					"name": "STATE | Invalid Transitions",
					"item": [
						{
							"name": "STATE | SUSPENDED → SUSPENDED | Rejected",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Cannot suspend already suspended user\", () => {",
											"  pm.response.to.have.status(400);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest(",
											"  {",
											"    url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/suspend`,",
											"    method: \"POST\"",
											"  },",
											"  function (err, res) {",
											"    if (err) {",
											"      console.warn(\"Pre-request failed\", err);",
											"      return;",
											"    }",
											"",
											"    if (res.code === 200) {",
											"      console.log(\"User suspended in pre-request\");",
											"    } else if (res.code === 400) {",
											"      console.log(\"User already suspended — state OK\");",
											"    } else {",
											"      console.warn(\"Unexpected response during suspend setup\", res.code);",
											"    }",
											"  }",
											");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/suspend",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"suspend"
									]
								},
								"description": "TEST_TYPE: STATE_TRANSITION  \nSTATE_REQUIRED: SUSPENDED  \nSTATE_ACTION: SUSPEND  \nEXPECTED_STATUS: 400  \nERROR_CODE: USER_ALREADY_SUSPENDED  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Ensure that a SUSPENDED user cannot be suspended again.  \nScope: State Transition validation (SUSPENDED → SUSPENDED)  \nPre-condition: User must be SUSPENDED (handled via pre-request script)  \nExpected Behavior: Request fails with HTTP 400 and proper error code  \nPost-condition: User state remains SUSPENDED  \nNotes: This test enforces lifecycle rules and prevents invalid operations."
							},
							"response": []
						},
						{
							"name": "STATE | ACTIVE → ACTIVE | Rejected",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Cannot activate already active user\", () => {",
											"  pm.response.to.have.status(400);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest(",
											"  {",
											"    url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/activate`,",
											"    method: \"POST\"",
											"  },",
											"  function (err, res) {",
											"    if (err) {",
											"      console.warn(\"Pre-request failed due to network issue\", err);",
											"      return;",
											"    }",
											"",
											"    // Acceptable responses for state setup",
											"    if (res.code === 200) {",
											"      console.log(\"User activated in pre-request\");",
											"    } else if (res.code === 400) {",
											"      console.log(\"User already active — state already satisfied\");",
											"    } else {",
											"      console.warn(\"Unexpected response during state setup\", res.code);",
											"    }",
											"  }",
											");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/activate",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"activate"
									]
								},
								"description": "TEST_TYPE: STATE_TRANSITION  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: ACTIVATE  \nEXPECTED_STATUS: 400  \nERROR_CODE: USER_ALREADY_ACTIVE  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Ensure that an ACTIVE user cannot be activated again.  \nScope: State Transition validation (ACTIVE → ACTIVE)  \nPre-condition: User must be ACTIVE (handled via pre-request script)  \nExpected Behavior: Request fails with HTTP 400 and proper error code  \nPost-condition: User state remains ACTIVE  \nNotes: This test enforces lifecycle rules and prevents invalid operations."
							},
							"response": []
						}
					]
				}
			],
			"description": "EXECUTION_PROFILE:  \nTEST_LEVEL: FLOW  \nENV_ALLOWED: QA  \nINTRODUCED_IN_BUILD: \\*  \nDEPLOYMENT_REQUIRED: COMPLETE  \nEXECUTION_ORDER: SEQUENTIAL  \nFAILURE_POLICY: STOP"
		},
		{
			"name": "05_Cross_Request_Consistency",
			"item": [
				{
					"name": "FLOW | Suspend User → GET reflects SUSPENDED",
					"item": [
						{
							"name": "STEP 1 | Suspend User",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"  url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/activate`,",
											"  method: \"POST\"",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Suspend successful\", () => {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"// Store expected state",
											"pm.environment.set(\"expectedState\", \"SUSPENDED\");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/activate",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"activate"
									]
								},
								"description": "TEST_TYPE: FLOW  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: SUSPEND  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Perform the ACTIVE → SUSPENDED transition.  \nScope: State change action for FLOW validation.  \nPre-condition: User must be ACTIVE (pre-request script ensures this)  \nExpected Behavior: Suspend request succeeds with HTTP 200.  \nPost-condition: User state is now SUSPENDED, ready for GET verification.  \nNotes: This step is part of the FLOW scenario and should not be run independently without step 2."
							},
							"response": []
						},
						{
							"name": "STEP 2 | Get User & Verify State",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const expected = pm.environment.get(\"expectedState\");",
											"const actual = pm.response.json().status;",
											"",
											"pm.test(\"State reflected in GET\", () => {",
											"  pm.expect(actual).to.eql(expected);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}"
									]
								},
								"description": "TEST_TYPE: FLOW  \nSTATE_REQUIRED: SUSPENDED  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Verify that the previous suspension is correctly reflected via GET.  \nScope: End-to-end validation of state change.  \nPre-condition: STEP 1 has successfully suspended the user.  \nExpected Behavior: GET returns user state as SUSPENDED.  \nPost-condition: Confirms that system state is consistent after the FLOW action.  \nNotes: This step validates cross-request consistency."
							},
							"response": []
						}
					],
					"description": "Purpose: Validates that suspending an ACTIVE user correctly updates the user state.  \nScope: End-to-end Flow validation, ensuring the POST operation is reflected in the GET response.  \nNotes: Must be executed in order. Pre-request scripts ensure the user is in the correct initial state."
				},
				{
					"name": "FLOW | Activate User → GET reflects ACTIVE",
					"item": [
						{
							"name": "STEP 1 | Activate User",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.sendRequest({",
											"  url: `${pm.environment.get(\"baseUrl\")}/users/${pm.environment.get(\"userId\")}/activate`,",
											"  method: \"POST\"",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Suspend successful\", () => {",
											"  pm.response.to.have.status(200);",
											"});",
											"",
											"// Store expected state",
											"pm.environment.set(\"expectedState\", \"SUSPENDED\");",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/users/{{userId}}/suspend",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"users",
										"{{userId}}",
										"suspend"
									]
								},
								"description": "TEST_TYPE: FLOW  \nSTATE_REQUIRED: SUSPENDED  \nSTATE_ACTION: ACTIVATE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Perform the SUSPENDED → ACTIVE transition.  \nScope: State change action for FLOW validation.  \nPre-condition: User must be SUSPENDED (pre-request script ensures this)  \nExpected Behavior: Activate request succeeds with HTTP 200.  \nPost-condition: User state is now ACTIVE, ready for GET verification.  \nNotes: This step is part of the FLOW scenario and should not be run independently without step 2."
							},
							"response": []
						},
						{
							"name": "STEP 2 | Get User & Verify State",
							"request": {
								"method": "GET",
								"header": [],
								"description": "TEST_TYPE: FLOW  \nSTATE_REQUIRED: ACTIVE  \nSTATE_ACTION: NONE  \nEXPECTED_STATUS: 200  \nERROR_CODE:  \nSEVERITY: HIGH\n\nDESCRIPTION:  \nPurpose: Verify that the previous activation is correctly reflected via GET.  \nScope: End-to-end validation of state change.  \nPre-condition: STEP 1 has successfully activated the user.  \nExpected Behavior: GET returns user state as ACTIVE.  \nPost-condition: Confirms that system state is consistent after the FLOW action.  \nNotes: This step validates cross-request consistency and ensures the system enforces lifecycle rules."
							},
							"response": []
						}
					],
					"description": "Purpose: Validates that activating a SUSPENDED user correctly updates the user state.  \nScope: End-to-end Flow validation, ensuring the POST operation (activation) is correctly reflected in the GET response.  \nNotes: Must be executed in order. Pre-request scripts ensure the user is in the correct initial state (SUSPENDED)."
				}
			],
			"description": "EXECUTION_PROFILE:  \nTEST_LEVEL: REGRESSION  \nENV_ALLOWED: QA | UAT  \nINTRODUCED_IN_BUILD: \\*  \nDEPLOYMENT_REQUIRED: COMPLETE  \nEXECUTION_ORDER: SEQUENTIAL  \nFAILURE_POLICY: STOP\n\nPurpose:  \nValidates consistency of data and system behavior across multiple API requests.\n\nScope:  \nEnsures that actions performed by one API request are accurately reflected in subsequent related requests (e.g., POST → GET, UPDATE → GET, STATE CHANGE → GET).\n\nWhat is validated:\n\n- Data consistency across requests\n    \n- State propagation between APIs\n    \n- No stale, cached, or contradictory responses\n    \n- Correct sequencing behavior\n    \n\nExecution Behavior:  \nRequests are order-dependent and should be executed sequentially.  \nFailures indicate potential data synchronization, caching, or backend processing issues."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"// ===============================",
					"// 1. Generate runId & email",
					"// ===============================",
					"if (!pm.environment.get(\"runId\")) {",
					"    pm.environment.set(\"runId\", Date.now());",
					"}",
					"",
					"if (!pm.environment.get(\"email\")) {",
					"    pm.environment.set(",
					"        \"email\",",
					"        `user_${pm.environment.get(\"runId\")}@test.com`",
					"    );",
					"}",
					"",
					"// ===============================",
					"// 2. Execution Context",
					"// ===============================",
					"const CURRENT_RUN_TYPE = pm.environment.get(\"RUN_TYPE\");      // SMOKE | REGRESSION | FULL",
					"const CURRENT_ENV = pm.environment.get(\"ENV\");                // QA | UAT | STAGE",
					"const CURRENT_BUILD = pm.environment.get(\"BUILD_VERSION\");    // 4.7.1",
					"",
					"// ===============================",
					"// 3. Read Metadata (Folder + Request)",
					"// ===============================",
					"const folderMeta = pm.info.parentId",
					"    ? pm.collectionVariables.get(pm.info.parentId + \"_META\") || \"\"",
					"    : \"\";",
					"",
					"const requestMeta = pm.request.description || \"\";",
					"",
					"// Request overrides folder",
					"const meta = `${folderMeta}\\n${requestMeta}`;",
					"",
					"// ===============================",
					"// 4. Helper to read metadata",
					"// ===============================",
					"function readMeta(key) {",
					"    const match = meta.match(new RegExp(`${key}:\\\\s*(.*)`));",
					"    return match ? match[1].trim() : null;",
					"}",
					"",
					"// ===============================",
					"// 5. Extract metadata",
					"// ===============================",
					"const testLevel = readMeta(\"TEST_LEVEL\");                 // SMOKE | REGRESSION",
					"const allowedEnvs = readMeta(\"ENV_ALLOWED\");              // QA | UAT",
					"const introducedInBuild = readMeta(\"INTRODUCED_IN_BUILD\");// 4.7.2",
					"const classification = readMeta(\"CLASSIFICATION\") || \"REGRESSION\";",
					"const actionOnFailure = readMeta(\"ACTION_ON_FAILURE\") || \"LOG_DEFECT\";",
					"",
					"// ===============================",
					"// 6. Semantic version compare",
					"// ===============================",
					"function compareVersion(v1, v2) {",
					"    const a = v1.split('.').map(Number);",
					"    const b = v2.split('.').map(Number);",
					"    for (let i = 0; i < Math.max(a.length, b.length); i++) {",
					"        const n1 = a[i] || 0;",
					"        const n2 = b[i] || 0;",
					"        if (n1 > n2) return 1;",
					"        if (n1 < n2) return -1;",
					"    }",
					"    return 0;",
					"}",
					"",
					"// ===============================",
					"// 7. Skip Conditions",
					"// ===============================",
					"",
					"// Test level",
					"if (testLevel && CURRENT_RUN_TYPE) {",
					"    if (!testLevel.split(\"|\").map(v => v.trim().toUpperCase())",
					"        .includes(CURRENT_RUN_TYPE.toUpperCase())) {",
					"        console.log(\"⏭ Skipped: TEST_LEVEL mismatch\");",
					"        pm.execution.setNextRequest(null);",
					"    }",
					"}",
					"",
					"// Environment",
					"if (allowedEnvs && CURRENT_ENV) {",
					"    if (!allowedEnvs.split(\"|\").map(v => v.trim().toUpperCase())",
					"        .includes(CURRENT_ENV.toUpperCase())) {",
					"        console.log(\"⏭ Skipped: ENV mismatch\");",
					"        pm.execution.setNextRequest(null);",
					"    }",
					"}",
					"",
					"// Introduced build check",
					"if (introducedInBuild &&",
					"    compareVersion(CURRENT_BUILD, introducedInBuild) < 0) {",
					"    console.log(`⏭ Skipped: Introduced in build ${introducedInBuild}`);",
					"    pm.execution.setNextRequest(null);",
					"}",
					"",
					"// ===============================",
					"// 8. Structured Result Logging",
					"// ===============================",
					"pm.environment.set(\"LAST_REQUEST_RESULT\", JSON.stringify({",
					"    request: pm.info.requestName,",
					"    build: CURRENT_BUILD,",
					"    status: pm.response ? pm.response.code : null,",
					"    failure: pm.response ? pm.response.code >= 400 : false,",
					"    classification,",
					"    action: actionOnFailure",
					"}));",
					"",
					"console.log(\"Request Result:\", pm.environment.get(\"LAST_REQUEST_RESULT\"));",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					"pm.test(\"Response time < 2s\", () => {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});",
					"",
					"pm.test(\"Response is JSON\", () => {",
					"    pm.response.to.be.json;",
					"});",
					""
				]
			}
		}
	]
}